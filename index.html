<!-- Inside <body> – replace your <form> section -->
<form id="quote-form" action="https://formspree.io/f/mykdpzyz" method="POST" enctype="multipart/form-data">
    <input type="hidden" name="_subject" value="New Black Rabbit Landscaping Quote Request – Lawn Mowing / Yard Care">
    <input type="hidden" name="_next" value="/thankyou.html">  <!-- This tells Formspree to redirect here on success -->

    <!-- All your form fields stay the same -->
    <!-- ... name, email, phone, address, service, photos, message ... -->

    <button type="submit" id="submit-btn">Send Free Quote Request</button>
</form>

<!-- Keep the floating buttons -->

<!-- Simplified script (removes modal, keeps progress bar and reset) -->
<script>
    const form = document.getElementById('quote-form');
    const submitBtn = document.getElementById('submit-btn');
    const progressContainer = document.getElementById('progress-container');
    const progressBar = document.getElementById('progress-bar');
    const progressText = document.getElementById('progress-text');
    const recaptchaTokenField = document.getElementById('recaptcha-token');

    form.addEventListener('submit', function(e) {
        e.preventDefault();
        submitBtn.disabled = true;
        submitBtn.textContent = 'Sending...';

        grecaptcha.ready(function() {
            grecaptcha.execute('6LdzM3EsAAAAAJCFIKo96XlSKdq8hRuXO5KgVeFj', {action: 'submit_quote'}).then(function(token) {
                recaptchaTokenField.value = token;

                const formData = new FormData(form);
                const xhr = new XMLHttpRequest();

                progressBar.style.width = '0%';
                progressBar.textContent = '0%';
                progressText.textContent = '';
                progressContainer.style.display = (document.getElementById('photos').files.length > 0) ? 'block' : 'none';

                xhr.upload.addEventListener('progress', function(event) {
                    if (event.lengthComputable) {
                        const percent = Math.round((event.loaded / event.total) * 100);
                        progressBar.style.width = percent + '%';
                        progressBar.textContent = percent + '%';
                        const loaded = (event.loaded / 1048576).toFixed(1);
                        const total = (event.total / 1048576).toFixed(1);
                        progressText.textContent = `Uploading ${loaded} MB of ${total} MB`;
                    }
                });

                xhr.addEventListener('load', function() {
                    // Don't need to handle success here – Formspree will redirect to thankyou.html
                    // But reset button just in case
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'Send Free Quote Request';
                });

                xhr.addEventListener('error', function() {
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'Send Free Quote Request';
                    alert('Network error – please check your connection or call us directly at (407) 951-1663.');
                    progressContainer.style.display = 'none';
                });

                xhr.open('POST', form.action);
                xhr.setRequestHeader('Accept', 'application/json');
                xhr.send(formData);
            }).catch(function() {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Send Free Quote Request';
                alert('reCAPTCHA verification failed. Please try again.');
            });
        });
    });
</script>
